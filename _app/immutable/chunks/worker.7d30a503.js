import { d as f } from "./index.098253ec.js"; let i; const G = {}, L = {}, y = {}, g = {}, A = {}, U = {}, ye = () => { i = JSON.parse(f.SkillTree), console.log("Loaded skill tree", i), Object.keys(i.groups).forEach(t => { const n = i.groups[t]; n.nodes.forEach(r => { const s = i.nodes[r]; s.isProxy || "classStartIndex" in s || s.expansionJewel && s.expansionJewel.parent || s.isBlighted || s.ascendancyName || (G[parseInt(t)] = n, L[parseInt(r)] = s) }) }), Object.keys(i.sprites.keystoneInactive["0.3835"].coords).forEach(t => y[t] = i.sprites.keystoneInactive["0.3835"]), Object.keys(i.sprites.notableInactive["0.3835"].coords).forEach(t => y[t] = i.sprites.notableInactive["0.3835"]), Object.keys(i.sprites.normalInactive["0.3835"].coords).forEach(t => y[t] = i.sprites.normalInactive["0.3835"]), Object.keys(i.sprites.masteryInactive["0.3835"].coords).forEach(t => y[t] = i.sprites.masteryInactive["0.3835"]), Object.keys(i.sprites.keystoneActive["0.3835"].coords).forEach(t => g[t] = i.sprites.keystoneActive["0.3835"]), Object.keys(i.sprites.notableActive["0.3835"].coords).forEach(t => g[t] = i.sprites.notableActive["0.3835"]), Object.keys(i.sprites.normalActive["0.3835"].coords).forEach(t => g[t] = i.sprites.normalActive["0.3835"]), Object.keys(i.sprites.masteryInactive["0.3835"].coords).forEach(t => g[t] = i.sprites.masteryInactive["0.3835"]), Object.keys(i.sprites.groupBackground["0.3835"].coords).forEach(t => y[t] = i.sprites.groupBackground["0.3835"]), Object.keys(i.sprites.frame["0.3835"].coords).forEach(t => y[t] = i.sprites.frame["0.3835"]), [f.StatTranslationsJSON, f.PassiveSkillStatTranslationsJSON, f.PassiveSkillAuraStatTranslationsJSON].forEach(t => { JSON.parse(t).descriptors.forEach(r => { r.ids.forEach(s => { s in A || (A[s] = r) }) }) }), Object.keys(f.TreeToPassive).forEach(t => { U[f.TreeToPassive[parseInt(t)].Index] = parseInt(t) }) }, B = { negate: -1, times_twenty: 1 / 20, canonical_stat: 1, per_minute_to_per_second: 60, milliseconds_to_seconds: 1e3, display_indexable_support: 1, divide_by_one_hundred: 100, milliseconds_to_seconds_2dp_if_required: 1e3, deciseconds_to_seconds: 10, old_leech_percent: 1, old_leech_permyriad: 1e4, times_one_point_five: 1 / 1.5, "30%_of_value": 100 / 30, divide_by_one_thousand: 1e3, divide_by_twelve: 12, divide_by_six: 6, per_minute_to_per_second_2dp_if_required: 60, "60%_of_value": 100 / 60, double: 1 / 2, negate_and_double: 1 / -2, multiply_by_four: 1 / 4, per_minute_to_per_second_0dp: 60, milliseconds_to_seconds_0dp: 1e3, mod_value_to_item_class: 1, milliseconds_to_seconds_2dp: 1e3, multiplicative_damage_modifier: 1, divide_by_one_hundred_2dp: 100, per_minute_to_per_second_1dp: 60, divide_by_one_hundred_2dp_if_required: 100, divide_by_ten_1dp_if_required: 10, milliseconds_to_seconds_1dp: 1e3, divide_by_fifty: 50, per_minute_to_per_second_2dp: 60, divide_by_ten_0dp: 10, divide_by_one_hundred_and_negate: -100, tree_expansion_jewel_passive: 1, passive_hash: 1, divide_by_ten_1dp: 10, affliction_reward_type: 1, divide_by_five: 5, metamorphosis_reward_description: 1, divide_by_two_0dp: 2, divide_by_fifteen_0dp: 15, divide_by_three: 3, divide_by_twenty_then_double_0dp: 10, divide_by_four: 4 }, P = (e, t, n, r, s) => ({ x: (Math.abs(i.min_x) + e + n) / s, y: (Math.abs(i.min_y) + t + r) / s }), $ = (e, t, n) => { const r = Math.PI / 180 * n, s = Math.cos(r), a = Math.sin(r), o = s * (t.x - e.x) + a * (t.y - e.y) + e.x, c = s * (t.y - e.y) - a * (t.x - e.x) + e.y; return { x: o, y: c } }, I = [0, 30, 45, 60, 90, 120, 135, 150, 180, 210, 225, 240, 270, 300, 315, 330], M = [0, 10, 20, 30, 40, 45, 50, 60, 70, 80, 90, 100, 110, 120, 130, 135, 140, 150, 160, 170, 180, 190, 200, 210, 220, 225, 230, 240, 250, 260, 270, 280, 290, 300, 310, 315, 320, 330, 340, 350], K = (e, t) => { const n = i.constants.skillsPerOrbit[e]; return n == 16 ? I[I.length - t] || 0 : n == 40 ? M[M.length - t] || 0 : 360 - 360 / n * t }, N = (e, t, n, r) => { if (e.group === void 0 || e.orbit === void 0 || e.orbitIndex === void 0) return { x: 0, y: 0 }; const s = i.groups[e.group], a = K(e.orbit, e.orbitIndex), o = P(s.x, s.y, t, n, r), c = P(s.x, s.y - i.constants.orbitRadii[e.orbit], t, n, r); return $(o, c, a) }, Q = (e, t) => Math.sqrt(Math.pow(e.x - t.x, 2) + Math.pow(e.y - t.y, 2)), X = (e, t) => { var a, o; let n = -1; for (let c = 0; c < e.list.length; c++) { const u = e.list[c]; let l = !0; if (((a = u.conditions) == null ? void 0 : a.length) > 0) { const d = u.conditions[0]; d.min !== void 0 && t < d.min && (l = !1), d.max !== void 0 && t > d.max && (l = !1), d.negated && (l = !l) } if (l) { n = c; break } } if (n == -1) return; const r = e.list[n]; let s = t; return ((o = r.index_handlers) == null ? void 0 : o.length) > 0 && r.index_handlers[0].forEach(c => { s = s / (B[c] || 1) }), r.string.replace(/\{0(?::(.*?)d(.*?))\}/, "$1" + s.toString() + "$2").replace("{0}", s.toString()) }, Y = 1800, he = e => { const t = [], n = N(e, 0, 0, 1); for (const r of Object.values(L)) { const s = N(r, 0, 0, 1); Q(s, n) < Y && t.push(r) } return t }, j = {}, Z = e => { const t = typeof e == "string" ? parseInt(e) : e; return t in j || (j[t] = f.GetStatByIndex(t)), j[t] }, be = (e, t) => { const n = Z(e), r = A[n.ID]; if (t) return X(r, t) || n.ID; let s = n.Text || n.ID; return r && r.list && r.list.length && (s = r.list[0].string, s = s.replace(/\{\d(?::(.*?)d(.*?))\}/, "$1#$2").replace(/\{\d\}/, "#")), s }, x = { 1: { Ahuana: "explicit.pseudo_timeless_jewel_ahuana", Xibaqua: "explicit.pseudo_timeless_jewel_xibaqua", Doryani: "explicit.pseudo_timeless_jewel_doryani", Zerphi: "explicit.pseudo_timeless_jewel_zerphi" }, 2: { Kaom: "explicit.pseudo_timeless_jewel_kaom", Rakiata: "explicit.pseudo_timeless_jewel_rakiata", Kiloava: "explicit.pseudo_timeless_jewel_kiloava", Akoya: "explicit.pseudo_timeless_jewel_akoya" }, 3: { Deshret: "explicit.pseudo_timeless_jewel_deshret", Balbala: "explicit.pseudo_timeless_jewel_balbala", Asenath: "explicit.pseudo_timeless_jewel_asenath", Nasima: "explicit.pseudo_timeless_jewel_nasima" }, 4: { Venarius: "explicit.pseudo_timeless_jewel_venarius", Maxarius: "explicit.pseudo_timeless_jewel_maxarius", Dominus: "explicit.pseudo_timeless_jewel_dominus", Avarius: "explicit.pseudo_timeless_jewel_avarius" }, 5: { Cadiro: "explicit.pseudo_timeless_jewel_cadiro", Victario: "explicit.pseudo_timeless_jewel_victario", Chitus: "explicit.pseudo_timeless_jewel_chitus", Caspiro: "explicit.pseudo_timeless_jewel_caspiro" } }, C = 28, ee = (e, t, n) => { const r = []; for (const a of n) { if (r.length >= C) break; r.push(a.seed) } let s; return r.length * 4 < C ? s = [{ type: "count", value: { min: 1 }, filters: Object.keys(x[e]).map(a => r.map(o => ({ id: x[e][a], disabled: !1, value: { min: o, max: o } }))).flat(), disabled: !1 }] : s = Object.keys(x[e]).map(a => ({ type: "count", value: { min: 1 }, filters: r.map(o => ({ id: x[e][a], disabled: !1, value: { min: o, max: o } })), disabled: a != t })), { query: { status: { option: "online" }, name: f.TimelessJewels[e], type: "永恆珠寶", stats: s }, sort: { price: "asc" } } }, ge = (e, t, n) => { const r = new URL("https://web.poe.garena.tw/trade/search");r.searchParams.set("q",JSON.stringify(ee(e,t,n))),window.open(r,"_blank")};function te(){return new Worker(""+new URL("../workers/sync_worker-32527060.js",import.meta.url).href)}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const W=Symbol("Comlink.proxy"),se=Symbol("Comlink.endpoint"),ne=Symbol("Comlink.releaseProxy"),O=Symbol("Comlink.finalizer"),v=Symbol("Comlink.thrown"),z=e=>typeof e=="object"&&e!==null||typeof e=="function",re={canHandle:e=>z(e)&&e[W],serialize(e){const{port1:t,port2:n}=new MessageChannel;return J(e,t),[n,[n]]},deserialize(e){return e.start(),H(e)}},ie={canHandle:e=>z(e)&&v in e,serialize({value:e}){let t;return e instanceof Error?t={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:t={isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},D=new Map([["proxy",re],["throw",ie]]);function oe(e,t){for(const n of e)if(t===n||n==="*"||n instanceof RegExp&&n.test(t))return!0;return!1}function J(e,t=globalThis,n=["*"]){t.addEventListener("message",function r(s){if(!s||!s.data)return;if(!oe(n,s.origin)){console.warn(`Invalid origin '${s.origin}' for comlink proxy`);return}const{id:a,type:o,path:c}=Object.assign({path:[]},s.data),u=(s.data.argumentList||[]).map(m);let l;try{const d=c.slice(0,-1).reduce((_,b)=>_[b],e),p=c.reduce((_,b)=>_[b],e);switch(o){case"GET":l=p;break;case"SET":d[c.slice(-1)[0]]=m(s.data.value),l=!0;break;case"APPLY":l=p.apply(d,u);break;case"CONSTRUCT":{const _=new p(...u);l=_e(_)}break;case"ENDPOINT":{const{port1:_,port2:b}=new MessageChannel;J(e,b),l=ue(_,[_])}break;case"RELEASE":l=void 0;break;default:return}}catch(d){l={value:d,[v]:0}}Promise.resolve(l).catch(d=>({value:d,[v]:0})).then(d=>{const[p,_]=S(d);t.postMessage(Object.assign(Object.assign({},p),{id:a}),_),o==="RELEASE"&&(t.removeEventListener("message",r),q(t),O in e&&typeof e[O]=="function"&&e[O]())}).catch(d=>{const[p,_]=S({value:new TypeError("Unserializable return value"),[v]:0});t.postMessage(Object.assign(Object.assign({},p),{id:a}),_)})}),t.start&&t.start()}function ae(e){return e.constructor.name==="MessagePort"}function q(e){ae(e)&&e.close()}function H(e,t){return T(e,[],t)}function w(e){if(e)throw new Error("Proxy has been released and is not useable")}function V(e){return h(e,{type:"RELEASE"}).then(()=>{q(e)})}const k=new WeakMap,E="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const t=(k.get(e)||0)-1;k.set(e,t),t===0&&V(e)});function ce(e,t){const n=(k.get(t)||0)+1;k.set(t,n),E&&E.register(e,t,e)}function le(e){E&&E.unregister(e)}function T(e,t=[],n=function(){}){let r=!1;const s=new Proxy(n,{get(a,o){if(w(r),o===ne)return()=>{le(s),V(e),r=!0};if(o==="then"){if(t.length===0)return{then:()=>s};const c=h(e,{type:"GET",path:t.map(u=>u.toString())}).then(m);return c.then.bind(c)}return T(e,[...t,o])},set(a,o,c){w(r);const[u,l]=S(c);return h(e,{type:"SET",path:[...t,o].map(d=>d.toString()),value:u},l).then(m)},apply(a,o,c){w(r);const u=t[t.length-1];if(u===se)return h(e,{type:"ENDPOINT"}).then(m);if(u==="bind")return T(e,t.slice(0,-1));const[l,d]=R(c);return h(e,{type:"APPLY",path:t.map(p=>p.toString()),argumentList:l},d).then(m)},construct(a,o){w(r);const[c,u]=R(o);return h(e,{type:"CONSTRUCT",path:t.map(l=>l.toString()),argumentList:c},u).then(m)}});return ce(s,e),s}function de(e){return Array.prototype.concat.apply([],e)}function R(e){const t=e.map(S);return[t.map(n=>n[0]),de(t.map(n=>n[1]))]}const F=new WeakMap;function ue(e,t){return F.set(e,t),e}function _e(e){return Object.assign(e,{[W]:!0})}function S(e){for(const[t,n]of D)if(n.canHandle(e)){const[r,s]=n.serialize(e);return[{type:"HANDLER",name:t,value:r},s]}return[{type:"RAW",value:e},F.get(e)||[]]}function m(e){switch(e.type){case"HANDLER":return D.get(e.name).deserialize(e.value);case"RAW":return e.value}}function h(e,t,n){return new Promise(r=>{const s=pe();e.addEventListener("message",function a(o){!o.data||!o.data.id||o.data.id!==s||(e.removeEventListener("message",a),r(o.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:s},t),n)})}function pe(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function fe(){console.log("Creating sync worker");const e=new te,t=H(e);return{syncWorker:e,syncWrap:t}}const{syncWorker:xe,syncWrap:we}=fe();export{i as a,Y as b,L as c,G as d,N as e,Q as f,X as g,g as h,A as i,y as j,ge as k,ye as l,be as m,he as n,K as o,_e as p,we as s,P as t};
